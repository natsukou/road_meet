(()=>{var e={};e.id=697,e.ids=[697],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5738:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o});var r=s(482),a=s(9108),n=s(2563),i=s.n(n),l=s(8300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o=["",{children:["map",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4275)),"/Users/nakia/Dropbox/ai_projects/road_meet/frontend/src/app/map/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1342)),"/Users/nakia/Dropbox/ai_projects/road_meet/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/nakia/Dropbox/ai_projects/road_meet/frontend/src/app/map/[id]/page.tsx"],x="/map/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/map/[id]/page",pathname:"/map/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},6091:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},1486:()=>{},7559:(e,t,s)=>{Promise.resolve().then(s.bind(s,6712))},6712:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(5344),a=s(3729),n=s(8428),i=s(6506),l=s(9255);let d=[{name:"星巴克咖啡",address:"距离中点 200米",type:"coffee",rating:4.5},{name:"喜茶",address:"距离中点 350米",type:"tea",rating:4.3},{name:"西西弗书店",address:"距离中点 500米",type:"bookstore",rating:4.7},{name:"海底捞火锅",address:"距离中点 800米",type:"restaurant",rating:4.6},{name:"城市公园",address:"距离中点 600米",type:"park",rating:4.4}];function o(){let e=(0,n.useRouter)(),t=(0,n.useParams)(),s=(0,a.useRef)(null),[o,c]=(0,a.useState)(null),[x,m]=(0,a.useState)(null),[p,u]=(0,a.useState)(!0),[h,b]=(0,a.useState)(null);(0,a.useEffect)(()=>{let s=(0,l.PR)();if(!s){e.push("/login");return}c(s);let r=t.id,a=(0,l.yW)(r);if(!a||!a.creatorLocation||!a.partnerLocation){e.push(`/task/${r}`);return}m(a),u(!1)},[t.id,e]);let f=x?.creatorLocation&&x?.partnerLocation?(0,l.mZ)(x.creatorLocation,x.partnerLocation):null;return!p&&x&&f?(0,r.jsxs)("div",{className:"min-h-screen bg-light",children:[r.jsx("header",{className:"bg-white shadow-sm",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto px-4 py-4 flex items-center gap-4",children:[r.jsx(i.default,{href:`/task/${x.id}`,className:"text-gray hover:text-dark",children:"← 返回"}),r.jsx("h1",{className:"text-lg font-bold text-dark",children:"选择见面地点"})]})}),(0,r.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,r.jsxs)("div",{ref:s,className:"h-64 bg-gradient-to-br from-blue-100 to-green-100 flex items-center justify-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 opacity-30",children:(0,r.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 400 300",children:[[...Array(10)].map((e,t)=>r.jsx("line",{x1:"0",y1:30*t,x2:"400",y2:30*t,stroke:"#cbd5e1",strokeWidth:"1"},`h${t}`)),[...Array(14)].map((e,t)=>r.jsx("line",{x1:30*t,y1:"0",x2:30*t,y2:"300",stroke:"#cbd5e1",strokeWidth:"1"},`v${t}`)),r.jsx("line",{x1:"100",y1:"0",x2:"100",y2:"300",stroke:"#94a3b8",strokeWidth:"4"}),r.jsx("line",{x1:"0",y1:"150",x2:"400",y2:"150",stroke:"#94a3b8",strokeWidth:"4"})]})}),x.creatorLocation&&(0,r.jsxs)("div",{className:"absolute",style:{left:"30%",top:"40%"},children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white text-xs font-bold shadow-lg",children:"A"}),r.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-primary"})]}),r.jsx("p",{className:"text-xs text-dark mt-1 bg-white px-2 py-1 rounded shadow",children:"创建者"})]}),x.partnerLocation&&(0,r.jsxs)("div",{className:"absolute",style:{left:"70%",top:"60%"},children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"w-8 h-8 bg-secondary rounded-full flex items-center justify-center text-white text-xs font-bold shadow-lg",children:"B"}),r.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-secondary"})]}),r.jsx("p",{className:"text-xs text-dark mt-1 bg-white px-2 py-1 rounded shadow",children:"对方"})]}),(0,r.jsxs)("div",{className:"absolute",style:{left:"50%",top:"50%"},children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 bg-accent rounded-full flex items-center justify-center text-white text-xs font-bold shadow-lg animate-pulse",children:"★"}),r.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-accent"})]}),r.jsx("p",{className:"text-xs text-dark mt-1 bg-white px-2 py-1 rounded shadow font-medium",children:"推荐中点"})]})]}),r.jsx("div",{className:"bg-white p-4 border-b",children:(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray",children:"中点坐标"}),(0,r.jsxs)("p",{className:"font-medium text-dark",children:[f.lat.toFixed(4),", ",f.lng.toFixed(4)]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("span",{className:"text-gray",children:"推荐地点"}),(0,r.jsxs)("p",{className:"font-medium text-primary",children:[d.length," 个"]})]})]})}),(0,r.jsxs)("div",{className:"p-4",children:[r.jsx("h3",{className:"font-medium text-dark mb-3",children:"推荐见面地点"}),r.jsx("div",{className:"space-y-3",children:d.map((e,t)=>r.jsx("div",{onClick:()=>b(e),className:`bg-white p-4 rounded-xl shadow-sm cursor-pointer transition-all ${h?.name===e.name?"ring-2 ring-primary":"hover:shadow-md"}`,children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-dark",children:e.name}),r.jsx("p",{className:"text-sm text-gray mt-1",children:e.address}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,r.jsxs)("span",{className:"text-xs px-2 py-1 bg-blue-50 text-primary rounded",children:["coffee"===e.type&&"☕ 咖啡","tea"===e.type&&"\uD83E\uDDCB 茶饮","bookstore"===e.type&&"\uD83D\uDCDA 书店","restaurant"===e.type&&"\uD83C\uDF7D️ 餐厅","park"===e.type&&"\uD83C\uDF33 公园"]}),(0,r.jsxs)("span",{className:"text-xs text-accent",children:["★ ",e.rating]})]})]}),h?.name===e.name&&r.jsx("div",{className:"w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-xs",children:"✓"})})]})},t))}),h&&(0,r.jsxs)("button",{onClick:()=>alert(`已选择 ${h.name} 作为见面地点！`),className:"w-full mt-6 py-4 bg-primary text-white rounded-xl font-medium hover:bg-blue-600 transition-colors",children:["确认选择：",h.name]})]})]})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-light",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-gray",children:"加载中..."})]})})}},9255:(e,t,s)=>{"use strict";s.d(t,{Ak:()=>a,F9:()=>n,FZ:()=>l,PR:()=>r,mZ:()=>d,yW:()=>i});let r=()=>null,a=()=>[],n=e=>{},i=e=>a().find(t=>t.id===e),l=()=>Math.floor(16777215*Math.random()).toString(16).toUpperCase().padStart(6,"0"),d=(e,t)=>({lat:(e.lat+t.lat)/2,lng:(e.lng+t.lng)/2})},1342:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>a});var r=s(5036);s(5023);let a={title:"RoadMeet - 让相遇更有趣",description:"基于GPS的社交交友线下聚会应用"};function n({children:e}){return r.jsx("html",{lang:"zh-CN",children:r.jsx("body",{className:"antialiased",children:e})})}},4275:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let r=(0,s(6843).createProxy)(String.raw`/Users/nakia/Dropbox/ai_projects/road_meet/frontend/src/app/map/[id]/page.tsx`),{__esModule:a,$$typeof:n}=r,i=r.default},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[22,321],()=>s(5738));module.exports=r})();